<Window x:Class="FileConverter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="File Converter"
        Height="720"
        Width="1020"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        AllowDrop="True"
        Drop="Window_Drop"
        DragOver="Window_DragOver"
        Icon="FileConverter.ico"
        Background="#0A1E2E">

    <Grid>
        <!-- â”€â”€â”€â”€â”€â”€â”€â”€ Background â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <Grid.Background>
            <ImageBrush ImageSource="Assets/background.jpg" Stretch="UniformToFill"/>
        </Grid.Background>

        <!-- Dark tint overlay -->
        <Border Background="#55000000"/>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€ Outer container with safe margins â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <Grid Margin="36,28,36,36">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>     <!-- Header bar -->
                <RowDefinition Height="*"/>        <!-- Screen content -->
            </Grid.RowDefinitions>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 HEADER BAR
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid Grid.Row="0" Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- App Brand -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- Icon circle -->
                    <Border Width="36" Height="36"
                            CornerRadius="10"
                            Background="#40FFFFFF"
                            BorderBrush="#60FFFFFF"
                            BorderThickness="1"
                            Margin="0,0,12,0">
                        <Border.Effect>
                            <DropShadowEffect Color="#D84545" Opacity="0.4" ShadowDepth="0" BlurRadius="14"/>
                        </Border.Effect>
                        <Viewbox Width="20" Height="20">
                            <Canvas Width="24" Height="24">
                                <Path Fill="White"
                                      Data="M16 1H4C2.9 1 2 1.9 2 3v14h2V3h12V1zm3 4H8C6.9 5 6 5.9 6 7v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </Canvas>
                        </Viewbox>
                    </Border>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="FileConverter"
                                   Foreground="White"
                                   FontSize="20"
                                   FontWeight="Bold"/>
                        <TextBlock Text="Convert anything, instantly"
                                   Foreground="#90FFFFFF"
                                   FontSize="11"/>
                    </StackPanel>
                </StackPanel>

                <!-- Supported format pills -->
                <StackPanel Grid.Column="2"
                            Orientation="Horizontal"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Right">
                    <!-- Each pill -->
                    <Border Margin="4,0" Padding="10,4" CornerRadius="20"
                            Background="#25FFFFFF" BorderBrush="#35FFFFFF" BorderThickness="1">
                        <TextBlock Text="ðŸ“„ Docs" Foreground="#C0FFFFFF" FontSize="11"/>
                    </Border>
                    <Border Margin="4,0" Padding="10,4" CornerRadius="20"
                            Background="#25FFFFFF" BorderBrush="#35FFFFFF" BorderThickness="1">
                        <TextBlock Text="ðŸ–¼ï¸ Images" Foreground="#C0FFFFFF" FontSize="11"/>
                    </Border>
                    <Border Margin="4,0" Padding="10,4" CornerRadius="20"
                            Background="#25FFFFFF" BorderBrush="#35FFFFFF" BorderThickness="1">
                        <TextBlock Text="ðŸŽ¬ Video" Foreground="#C0FFFFFF" FontSize="11"/>
                    </Border>
                    <Border Margin="4,0" Padding="10,4" CornerRadius="20"
                            Background="#25FFFFFF" BorderBrush="#35FFFFFF" BorderThickness="1">
                        <TextBlock Text="ðŸŽµ Audio" Foreground="#C0FFFFFF" FontSize="11"/>
                    </Border>
                    <Border Margin="4,0" Padding="10,4" CornerRadius="20"
                            Background="#25FFFFFF" BorderBrush="#35FFFFFF" BorderThickness="1">
                        <TextBlock Text="ðŸ“¦ Archives" Foreground="#C0FFFFFF" FontSize="11"/>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 STATE 1 â€” UPLOAD SCREEN
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid x:Name="UploadScreen" Grid.Row="1" Visibility="Visible">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

                    <!-- Drop Zone Card -->
                    <Border x:Name="DropZone"
                            Width="520"
                            Height="320"
                            CornerRadius="24"
                            Background="#22FFFFFF"
                            BorderThickness="2"
                            Margin="0,0,0,0">
                        <Border.BorderBrush>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#80FFFFFF" Offset="0"/>
                                <GradientStop Color="#40D84545" Offset="0.5"/>
                                <GradientStop Color="#60FFFFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Opacity="0.4" ShadowDepth="6" BlurRadius="28"/>
                        </Border.Effect>

                        <Grid>
                            <!-- Subtle inner glow at top -->
                            <Border CornerRadius="24" VerticalAlignment="Top" Height="1"
                                    Background="#40FFFFFF" Margin="20,1,20,0"/>

                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">

                                <!-- Upload cloud icon -->
                                <Viewbox Width="72" Height="72" Margin="0,0,0,18">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="White" Opacity="0.9"
                                              Data="M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
                                    </Canvas>
                                </Viewbox>

                                <!-- Upload button -->
                                <Button x:Name="UploadButton"
                                        Content="  Upload Files"
                                        Style="{StaticResource GlassButton}"
                                        Click="UploadButton_Click"
                                        Margin="0,0,0,16"/>

                                <!-- Drag hint -->
                                <TextBlock Text="â€” or drag &amp; drop files here â€”"
                                           Foreground="White"
                                           FontSize="13"
                                           Opacity="0.55"
                                           HorizontalAlignment="Center"
                                           Margin="0,0,0,20"/>

                                <!-- Format support note -->
                                <Border Padding="16,8" CornerRadius="10"
                                        Background="#18FFFFFF"
                                        BorderBrush="#28FFFFFF" BorderThickness="1">
                                    <TextBlock TextAlignment="Center"
                                               Foreground="White"
                                               Opacity="0.65"
                                               FontSize="12"
                                               LineHeight="18">
                                        <Run Text="Documents Â· Images (JPG, PNG, JFIF, WebP, AVIFâ€¦) Â· Videos"/>
                                        <LineBreak/>
                                        <Run Text="Audio Â· Archives  â€”  50+ formats supported"/>
                                    </TextBlock>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 STATE 2 â€” CONVERSION OPTIONS SCREEN
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid x:Name="ConversionScreen" Grid.Row="1" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- File information card -->
                <Border Grid.Row="0"
                        Background="#28FFFFFF"
                        BorderBrush="#45FFFFFF"
                        BorderThickness="1"
                        CornerRadius="18"
                        Padding="24,18"
                        Margin="0,0,0,18">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" Opacity="0.25" ShadowDepth="4" BlurRadius="18"/>
                    </Border.Effect>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- File type icon badge -->
                        <Border Grid.Column="0"
                                Width="58" Height="58"
                                Background="#35FFFFFF"
                                CornerRadius="14"
                                BorderBrush="#50FFFFFF"
                                BorderThickness="1"
                                Margin="0,0,18,0">
                            <Border.Effect>
                                <DropShadowEffect Color="Black" Opacity="0.2" ShadowDepth="2" BlurRadius="8"/>
                            </Border.Effect>
                            <TextBlock x:Name="FileIconText"
                                       Text="ðŸ“„"
                                       FontSize="28"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Border>

                        <!-- File details -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock x:Name="FileNameText"
                                       Text="document.pdf"
                                       Foreground="White"
                                       FontSize="17"
                                       FontWeight="Bold"
                                       TextTrimming="CharacterEllipsis"/>
                            <TextBlock x:Name="FileTypeText"
                                       Text="Document â€¢ PDF Format"
                                       Foreground="White"
                                       Opacity="0.75"
                                       FontSize="13"
                                       Margin="0,4,0,0"/>
                            <TextBlock x:Name="FileSizeText"
                                       Text="2.5 MB"
                                       Foreground="White"
                                       Opacity="0.5"
                                       FontSize="12"
                                       Margin="0,2,0,0"/>
                        </StackPanel>

                        <!-- Change file button -->
                        <Button Grid.Column="2"
                                Content="â†©  Change File"
                                Style="{StaticResource SecondaryButton}"
                                Click="ChangeFile_Click"
                                VerticalAlignment="Center"/>
                    </Grid>
                </Border>

                <!-- Conversion options scrollable area -->
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              Padding="0,0,6,0">
                    <StackPanel>

                        <!-- â”€â”€ Recommended section â”€â”€ -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center">
                            <Border Width="4" Height="18" CornerRadius="2" Background="#D84545" Margin="0,0,10,0"/>
                            <TextBlock Text="Recommended"
                                       Foreground="White"
                                       FontSize="14"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <WrapPanel x:Name="RecommendedConversions" Margin="0,0,0,22"/>

                        <!-- â”€â”€ All formats section â”€â”€ -->
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10" VerticalAlignment="Center">
                            <Border Width="4" Height="18" CornerRadius="2" Background="#60FFFFFF" Margin="0,0,10,0"/>
                            <TextBlock Text="All Available Formats"
                                       Foreground="White"
                                       FontSize="14"
                                       FontWeight="SemiBold"
                                       Opacity="0.85"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <WrapPanel x:Name="AllConversions"/>
                    </StackPanel>
                </ScrollViewer>

                <!-- Bottom: quality settings if needed -->
                <StackPanel Grid.Row="2" Margin="0,16,0,0">
                    <Border x:Name="QualitySettingsPanel"
                            Background="#20FFFFFF"
                            BorderBrush="#35FFFFFF"
                            BorderThickness="1"
                            CornerRadius="14"
                            Padding="20,16"
                            Visibility="Collapsed">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="Quality"
                                       Foreground="White"
                                       FontSize="13"
                                       Opacity="0.85"
                                       VerticalAlignment="Center"
                                       Margin="0,0,14,0"/>
                            <Slider x:Name="QualitySlider"
                                    Grid.Column="1"
                                    Minimum="1"
                                    Maximum="100"
                                    Value="85"
                                    Style="{StaticResource ModernSlider}"
                                    VerticalAlignment="Center"/>
                            <TextBlock x:Name="QualityValueText"
                                       Grid.Column="2"
                                       Text="85%"
                                       Foreground="#D84545"
                                       FontSize="13"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"
                                       Margin="14,0,0,0"/>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 STATE 3 â€” CONVERSION PROGRESS SCREEN
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid x:Name="ProgressScreen" Grid.Row="1" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="500">
                    <Border Background="#28FFFFFF"
                            BorderBrush="#45FFFFFF"
                            BorderThickness="1"
                            CornerRadius="24"
                            Padding="48,44">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Opacity="0.35" ShadowDepth="6" BlurRadius="28"/>
                        </Border.Effect>

                        <StackPanel>
                            <!-- Spinning icon -->
                            <Viewbox Width="72" Height="72" Margin="0,0,0,28">
                                <Canvas Width="24" Height="24">
                                    <Path x:Name="ConvertingIcon"
                                          Fill="#D84545"
                                          Data="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z">
                                        <Path.Effect>
                                            <DropShadowEffect Color="#D84545" Opacity="0.7" ShadowDepth="0" BlurRadius="12"/>
                                        </Path.Effect>
                                        <Path.RenderTransform>
                                            <RotateTransform x:Name="IconRotation" CenterX="12" CenterY="12"/>
                                        </Path.RenderTransform>
                                        <Path.Triggers>
                                            <EventTrigger RoutedEvent="Path.Loaded">
                                                <BeginStoryboard>
                                                    <Storyboard RepeatBehavior="Forever">
                                                        <DoubleAnimation Storyboard.TargetName="IconRotation"
                                                                         Storyboard.TargetProperty="Angle"
                                                                         From="0" To="360"
                                                                         Duration="0:0:1.5"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </Path.Triggers>
                                    </Path>
                                </Canvas>
                            </Viewbox>

                            <!-- Status text -->
                            <TextBlock x:Name="ProgressStatusText"
                                       Text="Converting..."
                                       Foreground="White"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,6"/>

                            <TextBlock x:Name="ProgressDetailText"
                                       Text="Processing your file..."
                                       Foreground="White"
                                       Opacity="0.6"
                                       FontSize="13"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,26"/>

                            <!-- Progress bar -->
                            <ProgressBar x:Name="ConversionProgressBar"
                                         Style="{StaticResource ModernProgressBar}"
                                         Value="0"
                                         Maximum="100"
                                         Margin="0,0,0,10"/>

                            <!-- Percentage & label row -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Progress"
                                           Foreground="White"
                                           Opacity="0.45"
                                           FontSize="12"/>
                                <TextBlock x:Name="ProgressPercentText"
                                           Grid.Column="1"
                                           Text="0%"
                                           Foreground="#D84545"
                                           FontSize="13"
                                           FontWeight="SemiBold"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 STATE 4 â€” DOWNLOAD READY SCREEN
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid x:Name="DownloadScreen" Grid.Row="1" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Border Background="#28FFFFFF"
                            BorderBrush="#45FFFFFF"
                            BorderThickness="1"
                            CornerRadius="24"
                            Padding="55,50"
                            Width="500">
                        <Border.Effect>
                            <DropShadowEffect Color="Black" Opacity="0.35" ShadowDepth="6" BlurRadius="28"/>
                        </Border.Effect>

                        <StackPanel>
                            <!-- Success icon circle -->
                            <Border Width="90" Height="90"
                                    CornerRadius="45"
                                    Background="#22FFFFFF"
                                    BorderBrush="#40FFFFFF"
                                    BorderThickness="1"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,22">
                                <Border.Effect>
                                    <DropShadowEffect Color="#4CAF50" Opacity="0.55" ShadowDepth="0" BlurRadius="20"/>
                                </Border.Effect>
                                <Viewbox Width="54" Height="54">
                                    <Canvas Width="24" Height="24">
                                        <Path Fill="#4CAF50"
                                              Data="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                    </Canvas>
                                </Viewbox>
                            </Border>

                            <!-- Success headline -->
                            <TextBlock Text="Conversion Complete!"
                                       Foreground="White"
                                       FontSize="24"
                                       FontWeight="Bold"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,8"/>

                            <TextBlock x:Name="ConvertedFileInfo"
                                       Text="Your file is ready to download"
                                       Foreground="White"
                                       Opacity="0.7"
                                       FontSize="14"
                                       HorizontalAlignment="Center"
                                       TextAlignment="Center"
                                       Margin="0,0,0,30"/>

                            <!-- Divider -->
                            <Border Height="1" Background="#30FFFFFF" Margin="0,0,0,24"/>

                            <!-- Download button -->
                            <Button x:Name="DownloadButton"
                                    Content="â¬‡  Save File"
                                    Style="{StaticResource DownloadButton}"
                                    Click="Download_Click"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,14"/>

                            <!-- Convert another -->
                            <Button Content="Convert Another File"
                                    Style="{StaticResource SecondaryButton}"
                                    Click="ConvertAnother_Click"
                                    HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>

        </Grid>
    </Grid>
</Window>
